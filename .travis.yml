services:
- docker
env:
  matrix:
  - COMPOSE_VERSION=3.9
  global:
  - secure: V0He4wzI0/mHF+gmRAArvwJ7RxellMwPY6gX3Cx9B3Bf5JT06lsSXnUaVDoneB6d0YcSOz34CijowoL09jwjXKe32cZ16GNcZBhY2UKDhbK38iDfU8dBcOfKdnzikUItQ4iW6LV47MT+rLsqTkOTg3tEOzEussUVpYYU8KDbRgmnf0TlxtdLG3mxYTaZkIwidVBdtoDkCUkJqNtrBloWB+mwrb++XdABNWNV7DXVJlHQOCTy88a2GVsTMDxbMsc7AW7zehKLe+6gq0m4F30TlZeG3OWyS8lm8LUoSG4ulNidSA2qiU8ZAi6Pg2YoNnMjVHUaR3JJeWHTaFb/y6XfXuEcdacYyNFKCK5B7Othy1lG6VZmn264KpUBZsvWaOq7y6U2+Yjc22XQ3iOc0ZxKeAZC5A1mq/Rlrt/rEfX+002wbqPSwLABt2WEcpqEIzFiY2L1306pL3EGx8hP8S37AHTr8MACi50TOEtLzKQj1qiWsx9RRmaNSclQ4SZyxasqyZw1LG8BhHEVyfOhGSLkQPTkPPHQ3n2aGV54knWnmjXyfRLCm5TjYg0n07zdGDwe/pPdUt0VcQtUfmfnoepiS9hK/l6wGZfS6nvd/S55C9+33tPTocmzUVqCMJvrojNMdrLnvr5xb5KNhX7kXA0U3stEiCc7UJAQCpq+ViMR3/4=
  - secure: Zb0hEEhGtFUaQT3KLa8ughwlRlzl2PQ8V5eQLBD1S4mpzy+BfeXLUzfPNAH2+Hcr8tUWyQBauLczruHLlIGIpgUrNoxY4igu7F1DP9tRnZ58O66vfOOdRvOFmkt2psilC1xs7L9OtwVzlSuqv6BlH4Oumw+NZ5Mng9Sd3e9nqMVbfQBwpGs836UXPhvVeGO26/hs0Wr3qKY6RZ9Ofj5jmZMq5mFdJCOP4/C6mHcGJsPTsIChkFyVHyfVXdtBup6Uf0ZeW/DiW4QmG7O+DxQ5X9gu2EbDnm4ksNrqpRjSN8MeBF5XQFggci1/O+W9Ls83W6ugktFPd+X22NiLqV85eC7DyDoNbaaOaQsyWlJFCAspGT/TdR/ec5dicD0hxCdkxiYZl1AHNklubwMWQxq1tHNUT6IzDIlVPHwxCwRpocj6rFvoj+kIa6x0YOrfX03pKjND6tUWOccX14bslNcV3tVPhCbZJSgJfksH/raFZIthLi6ZOse7nCuUSbeq1VqPqovW7KQZgzJn2v6SNGLOAYtkmaX5Vkt5ictOF5vFmVcODwx5Hh9qDktIJGJFJzd3j8B1iumjDNqFDbHxLrzx5zRIpDRvVjMOkGdK+Uq3MDS+f7awe+IWsbvzM/m6vAgx5oHnqYshIo1kP51Yrm4HF3gI1iYSx5u8I05vkD4+mdk=
  - secure: q4+sTMv1IN9LczBMjxO/+fPa6O9C4k/ePhZIHJcpNdwHr6KxAxv6t/qRIH3I/glCil+Gmp+SF74fOH/ua0A7J13RaA05Cki7nb5hVG8z0WvZP8PJDbjvLdZXWcVQpzywFJsVZmAG9mWRxSR6NLjVYwaNf2fOQ4tAgD3VRKNuFvykQEOmVrm5gTaZP9GjLwKCLrf07U7okhpkUuYYurghoO1LuV5HrqCHZ+Zb0HuJAeGNyo7gD9owS6MW0ZqZtd4kmUr82SHOC9HSBmzMYX/Usgbzk51Dg+LSPkJt184HtWyjuoFjNAAGHoNK1xzGg5gdrKjRKmSz6pGVUCAr56qjniZ0cmu6H6TWokHkHU5N99XjXNIGO/RKGE76tbvV+UA/BuKDG6QD0EYlWZtV3cAmNktHp0XNzVoXF2HvDtBNRz9SAOLzlkzHV7NOvZ0QgKz54JuYNAPAJCn8IDz7Cin8CI1cVsnzA6+reHK8eqlxnqJeakha5aMAsZt3fh8FSrCaSuvwWrOdaMlzMBqBFWTS2SJTDHVqRdZdCtRqKoerNb9nXHmWz8FuA4XGHXH02eC+MX9/J96iGUM9AhF/6iQX6sq2Xv7CvkS7gv4/0BGdQP627GD/zYHD9JsBoaD7xayPtk0Qrxos0/gIa6DgO5nuJPZwivuVQbhA4lZH4JcrzeI=
script:
- docker build --target test --tag todo.app:test .
- docker run --env-file .env.test todo.app:test tests
- docker run --env BOARD_ID --env APP_KEY --env TOKEN todo.app:test tests_e2e
